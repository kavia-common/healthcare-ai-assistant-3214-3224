{"is_source_file": true, "format": "Python", "description": "This file defines SQLAlchemy ORM models for a healthcare-related chat application, including models for patients, chat threads, and chat messages, along with a mixin for timestamp fields.", "external_files": ["./db.py"], "external_methods": ["func.now()"], "published": ["Patient", "ChatThread", "ChatMessage", "TimestampMixin"], "classes": [{"name": "TimestampMixin", "description": "Provides common timestamp fields for creation and update times."}, {"name": "Patient", "description": "Represents a patient entity with personal info and related chat threads."}, {"name": "ChatThread", "description": "Represents a chat thread associated with a patient, containing messages."}, {"name": "ChatMessage", "description": "Represents an individual message within a chat thread."}], "methods": [{"name": "Mapped[datetime]", "description": "Type annotation for mapped timestamp columns."}, {"name": "relationship", "description": "Defines ORM relationships between models."}, {"name": "mapped_column", "description": "Creates mapped SQLAlchemy columns."}], "calls": ["func.now()"], "search-terms": ["Patient ORM model", "ChatThread ORM model", "ChatMessage ORM model", "TimestampMixin", "SQLAlchemy models for healthcare chat"], "state": 2, "file_id": 12, "knowledge_revision": 30, "git_revision": "", "revision_history": [{"28": ""}, {"30": ""}], "ctags": [{"_type": "tag", "name": "ChatMessage", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^class ChatMessage(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ChatThread", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^class ChatThread(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Patient", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^class Patient(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TimestampMixin", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^class TimestampMixin:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    __tablename__ = \"chat_messages\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    __tablename__ = \"chat_threads\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "ChatThread", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    __tablename__ = \"patients\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "age", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    age: Mapped[int | None] = mapped_column(Integer, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[int | None]", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    content: Mapped[str] = mapped_column(Text, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "TimestampMixin", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True, autoincrement=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True, autoincrement=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "ChatThread", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True, autoincrement=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    messages: Mapped[List[\"ChatMessage\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[List[\"ChatMessage\"]]", "kind": "variable", "scope": "ChatThread", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    name: Mapped[str] = mapped_column(String(255), nullable=False, index=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    notes: Mapped[str | None] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[str | None]", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "patient", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    patient: Mapped[Patient] = relationship(\"Patient\", back_populates=\"threads\")$/", "language": "Python", "typeref": "typename:Mapped[Patient]", "kind": "variable", "scope": "ChatThread", "scopeKind": "class"}, {"_type": "tag", "name": "patient_id", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    patient_id: Mapped[int] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "ChatThread", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    role: Mapped[str] = mapped_column(String(50), nullable=False)  # \"user\", \"agent1\", \"agent2\"$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "thread", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    thread: Mapped[ChatThread] = relationship(\"ChatThread\", back_populates=\"messages\")$/", "language": "Python", "typeref": "typename:Mapped[ChatThread]", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "thread_id", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    thread_id: Mapped[int] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "threads", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    threads: Mapped[List[\"ChatThread\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[List[\"ChatThread\"]]", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3224/backend/src/api/models.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "TimestampMixin", "scopeKind": "class"}], "hash": "cacdad20427560e9783f9f6fb2399766", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/models.py", "fields": [{"name": "__tablename__ = \"chat_messages\"", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"chat_threads\"", "scope": "ChatThread", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"patients\"", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int | None] age", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] content", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "TimestampMixin", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] id", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"ChatMessage\"]] messages", "scope": "ChatThread", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] name", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str | None] notes", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Patient] patient", "scope": "ChatThread", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] patient_id", "scope": "ChatThread", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] role", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[ChatThread] thread", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] thread_id", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"ChatThread\"]] threads", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] updated_at", "scope": "TimestampMixin", "scopeKind": "class", "description": "unavailable"}]}